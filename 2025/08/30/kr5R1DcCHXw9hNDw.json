{
  "name": "êµ¬ë‚´ ì‹ë‹¹ ì¹¼ë¡œë¦¬ ê³„ì‚° ë¦¬í¬íŠ¸",
  "nodes": [
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        128,
        1568
      ],
      "id": "d176448c-7441-4d92-a346-44092dd7a266",
      "name": "OpenAI Chat Model"
    },
    {
      "parameters": {
        "content": "## AI ì‹ë‹¨ ë¶„ì„ \n- Main : ìœ¡ê°œì¥\n- Side : í¬ë¦¬ë¯¸ì–´ë‹ˆì–¸ìƒì„ ì»¤í‹€ë ›, ë² ì´ì»¨ê·¸ë¦°ë¹ˆë³¶ìŒ, ëª¨ë‘ ì½©ì¡°ë¦¼, ìŒ€ë°¥, ë°°ì¶”ê¹€ì¹˜\n- Kcal : 1273",
        "height": 480,
        "width": 340
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        80,
        1200
      ],
      "id": "3cb7e531-e53c-4ec1-a895-1afeeaf58900",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "![](https://raw.githubusercontent.com/2innnnn0/assets/refs/heads/master/image/datapopcorn_logo_50px.png)\n# êµ¬ë‚´ ì‹ë‹¹ ì¹¼ë¡œë¦¬ ê³„ì‚° ë¦¬í¬íŠ¸\n\n- TRIGGER : ë§¤ì¼ ì ì‹¬(11:30), ì €ë…(05:30) ì‹¤í–‰.\n- TASK : ì‹ë‹¨ ë‚´ìš©ì„ ì´ë¯¸ì§€ì™€ í•¨ê»˜ ë¶„ì„í•´ì„œ íƒ„ë‹¨ì§€\n- TARGET : ë””ìŠ¤ì½”ë“œì— ë°œì†¡, CSVë¡œ ì¶”ì¶œ (ë…¸ì…˜, êµ¬ê¸€ì‹œíŠ¸ ë“± ì— ì ì¬)\n\n```API\nhttps://front.cjfreshmeal.co.kr/meal/v1/today-all-meal?storeIdx=6437&mealDt=20250508&reqType=total\n```",
        "height": 360,
        "width": 880
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -3104,
        608
      ],
      "id": "65640192-26b6-4214-a2a5-a5d2d56e8c33",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=mealIdx : {{ $('Limit').item.json.mealIdx }}\nmain : {{ $('Limit').item.json.name }}\nside : {{ $('Limit').item.json.side }}\nkcal : {{ $('Limit').item.json.kcal }}\nnutrition_ratio : {{ $json.content }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "=ë„ˆëŠ” ì „ë¬¸ ì˜ì–‘ì‚¬ì´ì ì‹ë‹¨ ë¶„ì„ê°€ì•¼.\nì‚¬ìš©ìê°€ ì œê³µí•˜ëŠ” êµ¬ë‚´ì‹ë‹¹ ì‹ë‹¨ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ, ë‹¤ìŒ 3ê°€ì§€ë¥¼ ìƒì„±í•´ì¤˜:\n\t1.\tanalysis: ì‹ë‹¨ì— ëŒ€í•œ ê°„ê²°í•œ ë¶„ì„ (200ì ì´ë‚´)\n\t2.\tscore: ì‹ì‚¬ì˜ ê±´ê°• ì ìˆ˜ (0~100 ì‚¬ì´ ì •ìˆ˜)\n\t3.\tsuggestion: ê±´ê°•í•œ ì‹ì‚¬ë¥¼ ìœ„í•œ ê°„ë‹¨í•œ ê°œì„  ì œì•ˆ (150ì ì´ë‚´)\n\nâ¸»\n\nğŸ“¥ ì…ë ¥ ì •ë³´:\n\tâ€¢\tmain: ì£¼ë©”ë‰´ ì´ë¦„\n\tâ€¢\tside: ì‚¬ì´ë“œ ë°˜ì°¬ ëª©ë¡ (ì‰¼í‘œë¡œ êµ¬ë¶„)\n\tâ€¢\tkcal: ì´ ì¹¼ë¡œë¦¬ (ì •ìˆ˜)\n\tâ€¢\tnutrition_ratio: íƒ„ìˆ˜í™”ë¬¼, ë‹¨ë°±ì§ˆ, ì§€ë°© ë¹„ìœ¨ì´ í¬í•¨ëœ JSON (ì˜ˆì‹œ: { \"carb\": 60, \"protein\": 25, \"fat\": 15 })\n\nâ¸»\n\nğŸ“¤ ì¶œë ¥ í¬ë§·:\n\n{\n  \"mealIdx\": ì‹ì‚¬ID,\n  \"carb\": íƒ„ìˆ˜í™”ë¬¼ ë¹„ìœ¨,\n  \"protein\": ë‹¨ë°±ì§ˆ ë¹„ìœ¨,\n  \"fat\": ì§€ë°© ë¹„ìœ¨,\n  \"analysis\": \"200ì ì´ë‚´ë¡œ ì‹ë‹¨ì— ëŒ€í•œ ìš”ì•½ ë¶„ì„ ì‘ì„±\",\n  \"score\": 0~100 ì •ìˆ˜ë¡œ í‰ê°€,\n  \"suggestion\": \"150ì ì´ë‚´ë¡œ ì‹ë‹¨ ê°œì„  ë°©ë²• ì œì•ˆ\"\n}\n\n\n\nâ¸»\n\nğŸ’¡ í‰ê°€ ê¸°ì¤€:\n\tâ€¢\tíƒ„ë‹¨ì§€ ë¹„ìœ¨\n\tâ€¢\tê¶Œì¥ ë¹„ìœ¨: íƒ„ìˆ˜í™”ë¬¼ 5055%, ë‹¨ë°±ì§ˆ 2030%, ì§€ë°© 20% ë‚´ì™¸\n\tâ€¢\tíƒ„ìˆ˜í™”ë¬¼ì´ 65% ì´ìƒì´ë©´ ê³¼ë‹¤ ì„­ì·¨ë¡œ ê°ì \n\tâ€¢\të‹¨ë°±ì§ˆì´ 20% ë¯¸ë§Œì´ë©´ ë‹¨ë°±ì§ˆ ë¶€ì¡±ìœ¼ë¡œ ê°ì \n\tâ€¢\tì§€ë°©ì´ 30% ì´ìƒì´ë©´ ê³ ì§€ë°© ê²½ê³ \n\tâ€¢\tì´ ì¹¼ë¡œë¦¬\n\tâ€¢\t700~900 kcal ì´ë‚´ë©´ ì´ìƒì \n\tâ€¢\t1000 kcal ì´ìƒì´ë©´ ê³¼ë‹¤ ì„­ì·¨ë¡œ ê°ì \n\tâ€¢\të°˜ì°¬ êµ¬ì„±\n\tâ€¢\tíŠ€ê¹€ë¥˜, í–„ ë“± ê°€ê³µìœ¡ì´ ë§ìœ¼ë©´ ê°ì \n\tâ€¢\tì½©, ì±„ì†Œ, ìƒì„  ë°˜ì°¬ì€ ê°€ì \n\tâ€¢\tsuggestion ì‘ì„±ë²•\n\tâ€¢\tíƒ„ìˆ˜í™”ë¬¼ ê³¼ë‹¤: â€œì¡ê³¡ë°¥ìœ¼ë¡œ ë°”ê¾¸ë©´ ì¢‹ì•„ìš”.â€\n\tâ€¢\të‹¨ë°±ì§ˆ ë¶€ì¡±: â€œì‚¶ì€ ë‹¬ê±€ì´ë‚˜ ë‹­ê°€ìŠ´ì‚´ì„ ì¶”ê°€í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.â€\n\tâ€¢\tì§€ë°© ê³¼ë‹¤: â€œíŠ€ê¹€ë¥˜ ëŒ€ì‹  êµ¬ì´ë‚˜ ì°œ ìš”ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”.â€\n\tâ€¢\tì¹¼ë¡œë¦¬ ê³¼ë‹¤: â€œë°¥ ì–‘ì„ ì¡°ì ˆí•˜ê±°ë‚˜, êµ­ë¬¼ ì„­ì·¨ë¥¼ ì¤„ì´ì„¸ìš”.â€\n\nâ¸»\n\nğŸ“Œ ì£¼ì˜ì‚¬í•­:\n\tâ€¢\tê²°ê³¼ëŠ” ë°˜ë“œì‹œ JSON í¬ë§·ìœ¼ë¡œ ì¶œë ¥\n\tâ€¢\tì„¤ëª…ì´ë‚˜ ì½”ë“œë¸”ë¡ ì—†ì´, ì˜¤ì§ ìˆœìˆ˜ JSON í…ìŠ¤íŠ¸ë¡œ ì¶œë ¥\n\tâ€¢\tanalysis: ìµœëŒ€ 200ì\n\tâ€¢\tsuggestion: ìµœëŒ€ 150ì\n\tâ€¢\tscore: ë°˜ë“œì‹œ ì •ìˆ˜\n\nâ¸»\n\nâœ… ì˜ˆì‹œ ì…ë ¥:\n\nmain : ìœ¡ê°œì¥  \nside : í¬ë¦¬ë¯¸ì–´ë‹ˆì–¸ìƒì„ ì»¤í‹€ë ›, ë² ì´ì»¨ê·¸ë¦°ë¹ˆë³¶ìŒ, ëª¨ë‘ ì½©ì¡°ë¦¼, ìŒ€ë°¥, ë°°ì¶”ê¹€ì¹˜  \nkcal : 1273  \nnutrition_ratio : { \"carb\": 60, \"protein\": 25, \"fat\": 15 }\n\n\nâ¸»\n\nâœ… ì˜ˆì‹œ ì¶œë ¥:\n\n{\n  \"mealIdx\": 1526273,\n  \"carb\": 55,\n  \"protein\": 25,\n  \"fat\": 20,\n  \"analysis\": \"ë‹¨ë°±ì§ˆê³¼ ì§€ë°© ë¹„ìœ¨ì€ ì ì ˆí•˜ë‚˜, ì¹¼ë¡œë¦¬ê°€ ë†’ê³  íŠ€ê¹€ ë°˜ì°¬ ë¹„ì¤‘ì´ ë§ì•„ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.\",\n  \"score\": 80,\n  \"suggestion\": \"íŠ€ê¹€ë¥˜ ëŒ€ì‹  êµ¬ì´ë‚˜ ì°œ ìš”ë¦¬ë¥¼ ì„ íƒí•˜ê³ , ë°¥ ì–‘ì„ ì¡°ê¸ˆ ì¤„ì´ë©´ ì¢‹ìŠµë‹ˆë‹¤.\"\n}\n\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.8,
      "position": [
        112,
        1344
      ],
      "id": "c2954f95-91ff-4a0b-811f-7a9f296a123c",
      "name": "ì˜ì–‘ë¶„ì„ Agent"
    },
    {
      "parameters": {
        "sortFieldsUi": {
          "sortField": [
            {
              "fieldName": "mealDt"
            },
            {
              "fieldName": "time"
            },
            {
              "fieldName": "corner"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.sort",
      "typeVersion": 1,
      "position": [
        -1456,
        1248
      ],
      "id": "d78ed3c1-76b0-4ca7-8506-c024e59d9872",
      "name": "Sort"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "4fff9305-4d5f-48a9-a570-9e651e98d640",
              "leftValue": "={{ $json.thumbnailUrl }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        -1248,
        1248
      ],
      "id": "0839b743-f854-44c4-a374-1bc73654ff7e",
      "name": "Filter"
    },
    {
      "parameters": {
        "maxItems": 10
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -1024,
        1248
      ],
      "id": "7bbe1c0f-0499-4a56-a821-8dbb860c9c1a",
      "name": "Limit"
    },
    {
      "parameters": {
        "url": "={{ $json.thumbnailUrl }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -576,
        1344
      ],
      "id": "41d358f5-2fc3-4f68-a67d-0d62ad6d137f",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "content": "# TRIGGER\n- ë§¤ì£¼ 1íšŒ",
        "height": 720,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -3104,
        992
      ],
      "id": "1f353f45-09b5-4e0c-8749-d01937596c80",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "# TASK\n- TARGET",
        "height": 720,
        "width": 3500,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2816,
        992
      ],
      "id": "4c65368a-682a-4dbd-a86a-840b8848e7cf",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "content": "## AI ì´ë¯¸ì§€ ë¶„ì„\n![](https://fsmealimageprd.ifresh.co.kr/meal/e7a90617-562e-4d72-a685-831e2e0560bc_IMG_1188.jpeg)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n```json\n    {\n      \"mealIdx\" : 1526273,\n      \"carb\": 50,\n      \"protein\": 30,\n      \"fat\": 20\n    }\n```",
        "height": 620,
        "width": 320
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -256,
        1040
      ],
      "id": "28c53641-0a70-4c2c-8a51-6376276151c2",
      "name": "Sticky Note9"
    },
    {
      "parameters": {
        "resource": "image",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "GPT-4O-MINI"
        },
        "text": "=ë„ˆëŠ” ì „ë¬¸ ì˜ì–‘ì‚¬ì´ì ìŒì‹ ì´ë¯¸ì§€ ë¶„ì„ê°€ì•¼.\nì‚¬ìš©ìê°€ ì œê³µí•œ ì‹íŒ ì‚¬ì§„ì„ ë¶„ì„í•˜ì—¬, í•´ë‹¹ ì‹ì‚¬ì˜ íƒ„ìˆ˜í™”ë¬¼(carb), ë‹¨ë°±ì§ˆ(protein), ì§€ë°©(fat) ë¹„ìœ¨ì„ ëŒ€ëµì ìœ¼ë¡œ ì¶”ì •í•´ì¤˜.\n\nMain: {{ $('Limit').item.json.name }}\nSide: {{ $('Limit').item.json.side }}\n\nì´ë¯¸ì§€ ë¶„ì„ ê¸°ì¤€:\n\tâ€¢\tíƒ„ìˆ˜í™”ë¬¼(carb): ë°¥, ë–¡, ë¹µ, êµ­ìˆ˜ë¥˜ ë“±\n\tâ€¢\të‹¨ë°±ì§ˆ(protein): ê³ ê¸°, ìƒì„ , ë‹¬ê±€, ì½©ë¥˜ ë“±\n\tâ€¢\tì§€ë°©(fat): íŠ€ê¹€ë¥˜, ë§ˆìš”ë„¤ì¦ˆ ì†ŒìŠ¤, í–„, ê¸°ë¦„ì§„ ìŒì‹\n\tâ€¢\tì±„ì†Œë¥˜ëŠ” ì‹ì´ì„¬ìœ  ê³µê¸‰ì›ìœ¼ë¡œ ì°¸ê³ í•˜ë˜, íƒ„ë‹¨ì§€ ë¹„ì¤‘ ê³„ì‚°ì—ëŠ” í¬í•¨í•˜ì§€ ì•Šì•„ë„ ì¢‹ì•„.\n\tâ€¢\têµ­ì´ë‚˜ ì°Œê°œë¥˜ëŠ” ê±´ë”ê¸° ê¸°ì¤€ìœ¼ë¡œ íŒë‹¨í•˜ê³ , êµ­ë¬¼ì€ ë¹„ì¤‘ ê³„ì‚°ì— í¬ê²Œ í¬í•¨í•˜ì§€ ì•Šì•„ë„ ê´œì°®ì•„.\n\nì¶œë ¥ í¬ë§·:\n  {\n    \"mealIdx\" : {{ $('Limit').item.json.mealIdx }} \n    \"carb\": íƒ„ìˆ˜í™”ë¬¼ ë¹„ì¤‘ (%),\n    \"protein\": ë‹¨ë°±ì§ˆ ë¹„ì¤‘ (%),\n    \"fat\": ì§€ë°© ë¹„ì¤‘ (%)\n  }\n\nì˜ˆì‹œ ì…ë ¥:\n\tâ€¢\tì‹íŒ ì´ë¯¸ì§€: ë°¥, ë¼ì§€ê³ ê¸°êµ­, ìƒì„ ê¹ŒìŠ¤, í–„ì•¼ì±„ë³¶ìŒ, ì½©ì¡°ë¦¼, ê¹€ì¹˜\n\nì˜ˆì‹œ ì¶œë ¥:\n    {\n      \"mealIdx\" : 1526273\n      \"carb\": 50,\n      \"protein\": 30,\n      \"fat\": 20\n    }\n\nì£¼ì˜:\nì„¤ëª…ì´ë‚˜ ```json ì½”ë“œ ë¸”ë¡ ì—†ì´, ìˆœìˆ˜ í…ìŠ¤íŠ¸(JSON í¬ë§·)ë¡œë§Œ ì¶œë ¥í•´ì¤˜.\nì„¤ëª…ì´ë‚˜ ```json ì½”ë“œ ë¸”ë¡ ì—†ì´, ìˆœìˆ˜ í…ìŠ¤íŠ¸(JSON í¬ë§·)ë¡œë§Œ ì¶œë ¥í•´ì¤˜.\nì„¤ëª…ì´ë‚˜ ```json ì½”ë“œ ë¸”ë¡ ì—†ì´, ìˆœìˆ˜ í…ìŠ¤íŠ¸(JSON í¬ë§·)ë¡œë§Œ ì¶œë ¥í•´ì¤˜.\nì„¤ëª…ì´ë‚˜ ```json ì½”ë“œ ë¸”ë¡ ì—†ì´, ìˆœìˆ˜ í…ìŠ¤íŠ¸(JSON í¬ë§·)ë¡œë§Œ ì¶œë ¥í•´ì¤˜.",
        "inputType": "base64",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        -160,
        1344
      ],
      "id": "a1bf33c0-ced0-4f70-b70e-7c0ca22037f5",
      "name": "OpenAI"
    },
    {
      "parameters": {
        "content": "## í•„í„°(ì´ë¯¸ì§€ë§Œ ìˆëŠ” ì‹ë‹¨ë§Œ)",
        "height": 300,
        "width": 160
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1264,
        1104
      ],
      "id": "cdc56584-d353-4837-a06a-40e7cfd878bc",
      "name": "Sticky Note10"
    },
    {
      "parameters": {
        "content": "## ë””ë²„ê¹…",
        "height": 300,
        "width": 160
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1056,
        1104
      ],
      "id": "3b79e165-c00c-4fac-b882-376c75826b37",
      "name": "Sticky Note11"
    },
    {
      "parameters": {
        "content": "## ì •ë ¬(ë‚ ì§œ,ì‹œê°„)",
        "height": 300,
        "width": 160
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1488,
        1104
      ],
      "id": "a4adc4dc-29ae-4d89-bb70-07da8544c9f4",
      "name": "Sticky Note12"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "be6e48d2-413d-4880-8c75-8f9cbf157dc6",
              "name": "mealDt",
              "value": "={{ $json.mealDt }}",
              "type": "string"
            },
            {
              "id": "6b03b4b5-a776-4824-a5aa-b6484b8aa0a0",
              "name": "time",
              "value": "={{ $json.time }}",
              "type": "string"
            },
            {
              "id": "b7a0019f-1b05-41d2-bf5e-ab5bdad46510",
              "name": "corner",
              "value": "={{ $json.corner }}",
              "type": "string"
            },
            {
              "id": "866fbc4a-9d7a-465e-8436-9c20c840b5b7",
              "name": "mealIdx",
              "value": "={{ $json.mealIdx }}",
              "type": "string"
            },
            {
              "id": "ab90aca9-5d2d-41ff-bd88-9de14d8f6e3f",
              "name": "name",
              "value": "={{ $json.name }}",
              "type": "string"
            },
            {
              "id": "867048d7-69a1-4213-b973-f4717076db95",
              "name": "side",
              "value": "={{ $json.side }}",
              "type": "string"
            },
            {
              "id": "a8cae341-4edf-467f-b2ff-9e5eaea2e1bf",
              "name": "thumbnailUrl",
              "value": "={{ $json.thumbnailUrl }}",
              "type": "string"
            },
            {
              "id": "70f50564-14a5-4a0e-8b6b-6fbaaac59c7a",
              "name": "kcal",
              "value": "={{ $json.kcal }}",
              "type": "string"
            },
            {
              "id": "d3f5da25-b9dd-4b51-9c6f-a26ed536ab09",
              "name": "mealCd",
              "value": "={{ $json.mealCd }}",
              "type": "string"
            },
            {
              "id": "7eb0f9e9-0ab9-4b1a-ae31-184928547de4",
              "name": "moHour",
              "value": "={{ $json.moHour }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1744,
        1248
      ],
      "id": "4fcef3f2-6518-43f0-b290-1b8b32bf1920",
      "name": "í•„ìš”í•œ ì»¬ëŸ¼ë§Œ"
    },
    {
      "parameters": {
        "operation": "resize",
        "width": 50,
        "height": null,
        "resizeOption": "percent",
        "options": {}
      },
      "type": "n8n-nodes-base.editImage",
      "typeVersion": 1,
      "position": [
        -400,
        1344
      ],
      "id": "3cbf0339-72f5-4ad2-bb05-5e457762ed50",
      "name": "Resize Img",
      "retryOnFail": true
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -800,
        1376
      ],
      "id": "afe75632-2647-439a-a4c1-62811b40d487",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "mode": "combine",
        "fieldsToMatchString": "mealIdx",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.1,
      "position": [
        -608,
        784
      ],
      "id": "dd581612-de3e-4d73-99fd-0adc32130084",
      "name": "Merge1"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n   \"mealIdx\": 1526273,\n   \"carb\": 55,\n  \"protein\": 25,\n  \"fat\": 20,\n  \"analysis\": \"ë‹¨ë°±ì§ˆê³¼ ì§€ë°© ë¹„ìœ¨ì€ ì ì ˆí•˜ë‚˜, ì¹¼ë¡œë¦¬ê°€ ë†’ê³  íŠ€ê¹€ ë°˜ì°¬ ë¹„ì¤‘ì´ ë§ì•„ ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.\",\n  \"score\": 80,\n  \"suggestion\": \"íŠ€ê¹€ë¥˜ ëŒ€ì‹  êµ¬ì´ë‚˜ ì°œ ìš”ë¦¬ë¥¼ ì„ íƒí•˜ê³ , ë°¥ ì–‘ì„ ì¡°ê¸ˆ ì¤„ì´ë©´ ì¢‹ìŠµë‹ˆë‹¤.\"\n}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.2,
      "position": [
        272,
        1568
      ],
      "id": "18b3e62b-335c-4ec8-8a58-80de543dd8cc",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "bcbec239-efe6-41e0-9546-01ac4a5d3df4",
              "name": "mealIdx",
              "value": "={{ $json.output.mealIdx }}",
              "type": "string"
            },
            {
              "id": "b0e91c80-74f3-4afb-80a4-86f5629de6e9",
              "name": "carb",
              "value": "={{ $json.output.carb }}",
              "type": "string"
            },
            {
              "id": "2d737940-cf36-4f59-a0cd-04c75040fd6f",
              "name": "protein",
              "value": "={{ $json.output.protein }}",
              "type": "string"
            },
            {
              "id": "4e6ebfba-4220-4659-9e4a-fa81325099cc",
              "name": "fat",
              "value": "={{ $json.output.fat }}",
              "type": "string"
            },
            {
              "id": "0efe987b-6aa9-45c0-a266-c7bfcbd7fe23",
              "name": "analysis",
              "value": "={{ $json.output.analysis }}",
              "type": "string"
            },
            {
              "id": "26fd951b-9a7c-4725-911d-b76501b6bc24",
              "name": "score",
              "value": "={{ $json.output.score }}",
              "type": "string"
            },
            {
              "id": "f8b7ff37-83e7-4867-bb46-ec7a95b95e3c",
              "name": "suggestion",
              "value": "={{ $json.output.suggestion }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        512,
        1472
      ],
      "id": "cc1e3f81-c337-423a-92d8-b9c341200d93",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "authentication": "webhook",
        "content": "=(TEST) ğŸ½ï¸ ì‹ë‹¨ ë¶„ì„ ì•ˆë‚´\n\nğŸ“ ì½”ë„ˆ: {{ $json.corner }}\nğŸ± ë©”ì¸ ë©”ë‰´: {{ $json.name }}\nğŸ¥— ì‚¬ì´ë“œ ë©”ë‰´: {{ $json.side }}\nğŸ”¥ ì´ ì¹¼ë¡œë¦¬: {{ $json.kcal }} kcal\nâš¡ ì˜ì–‘ ë¹„ìœ¨ (íƒ„:ë‹¨:ì§€): {{ $json.carb }} : {{ $json.protein }} : {{ $json.fat }}\n{{ $json.thumbnailUrl }}\n\nâ¸»\n\nğŸ… ì ìˆ˜: {{ $json.score }} ì \nğŸ“ ì‹ë‹¨ í‰ê°€: {{ $json.analysis }}\nğŸ’¡ ê°œì„  ì œì•ˆ: {{ $json.suggestion }}",
        "options": {}
      },
      "type": "n8n-nodes-base.discord",
      "typeVersion": 2,
      "position": [
        -336,
        864
      ],
      "id": "26bbf624-15b3-4879-afdf-05c0f7f6cdc7",
      "name": "Discord",
      "webhookId": "2ae4af8e-38db-4668-817c-b56593902de0"
    },
    {
      "parameters": {
        "content": "# TARGET",
        "height": 600,
        "width": 320,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -448,
        448
      ],
      "id": "af2251e4-9f7a-4080-8445-62eb88c4ea07",
      "name": "Sticky Note8"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.convertToFile",
      "typeVersion": 1.1,
      "position": [
        -336,
        688
      ],
      "id": "9016625f-cd93-4204-9cc6-a6748499d1e7",
      "name": "Convert to File"
    },
    {
      "parameters": {
        "content": "## ì´ë¯¸ì§€ ë‹¤ìš´ì‚¬ì´ì§•\n- openAI ë…¸ë“œ ë²„í¼",
        "height": 260,
        "width": 340
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -624,
        1248
      ],
      "id": "b55e95e1-70d0-420e-9e2d-923bed248b9f",
      "name": "Sticky Note13"
    },
    {
      "parameters": {
        "content": "## ìµœì¢… ì•„ì›ƒí’‹ ì •ë¦¬",
        "height": 300,
        "width": 200
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        448,
        1360
      ],
      "id": "d61fc5d2-374b-4240-ba0a-2d63e103f0c9",
      "name": "Sticky Note14"
    },
    {
      "parameters": {
        "content": "## JOIN : mealIdx",
        "height": 260,
        "width": 200
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -656,
        688
      ],
      "id": "b78336b0-25f7-48a4-88c6-1beebeef229f",
      "name": "Sticky Note15"
    },
    {
      "parameters": {
        "url": "=https://front.cjfreshmeal.co.kr/meal/v1/today-all-meal?storeIdx=6437&mealDt={{ $json.timestamp.toDateTime().format('yyyyMMdd') }}&reqType=total",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -2688,
        1152
      ],
      "id": "a9efc87a-cf5e-46d4-8773-18f740b19686",
      "name": "êµ¬ë‚´ì‹ë‹¹ ì¡°íšŒ"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.1,
      "position": [
        -1968,
        1248
      ],
      "id": "ad0e36e2-143d-4478-b81f-0001867d562b",
      "name": "Merge"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 11,
              "triggerAtMinute": 30
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -3024,
        1152
      ],
      "id": "8033d693-221a-4d7b-b49a-acf8f6eb1753",
      "name": "Run 1130"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 17,
              "triggerAtMinute": 30
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -3024,
        1344
      ],
      "id": "e3d4e44c-e60f-4320-9bb5-d25f4f3665e7",
      "name": "Run 0530"
    },
    {
      "parameters": {
        "content": "## ì¡°/ì¤‘/ì„ êµ¬ë¶„ & ë°ì´í„° ì „ì²˜ë¦¬",
        "height": 620,
        "width": 860,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -2464,
        1008
      ],
      "id": "ce8215c8-2277-4598-aeb8-ca9807d5a635",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "fieldToSplitOut": "=data[2]",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -2400,
        1152
      ],
      "id": "872cf7a9-dae6-4745-9c1a-0953af15847c",
      "name": "ì¤‘ì‹"
    },
    {
      "parameters": {
        "fieldToSplitOut": "=data[3]",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -2400,
        1344
      ],
      "id": "d5f468f2-c5c3-4bb8-912a-5c85efbae1b0",
      "name": "ì„ì‹"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "31a03a02-389c-44ca-ab2d-ce9b6dd5f919",
              "name": "time",
              "value": "2ì¤‘ì‹",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -2176,
        1152
      ],
      "id": "fc078989-84e5-4803-906f-47f0641b4ca9",
      "name": "ì¤‘ì‹ë¼ë²¨"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "31a03a02-389c-44ca-ab2d-ce9b6dd5f919",
              "name": "time",
              "value": "3ì„ì‹",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -2176,
        1344
      ],
      "id": "f0017b9c-475d-4d1f-85ec-4d4329461891",
      "name": "ì„ì‹ë¼ë²¨"
    },
    {
      "parameters": {
        "tableId": "meal",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "mealIdx",
              "fieldValue": "={{ $json.mealIdx }}"
            },
            {
              "fieldId": "mealDt",
              "fieldValue": "={{ $json.mealDt }}"
            },
            {
              "fieldId": "time",
              "fieldValue": "={{ $json.time }}"
            },
            {
              "fieldId": "name",
              "fieldValue": "={{ $json.name }}"
            },
            {
              "fieldId": "side",
              "fieldValue": "={{ $json.side }}"
            },
            {
              "fieldId": "thumbnailUrl",
              "fieldValue": "={{ $json.thumbnailUrl }}"
            },
            {
              "fieldId": "kcal",
              "fieldValue": "={{ $json.kcal }}"
            },
            {
              "fieldId": "carb",
              "fieldValue": "={{ $json.carb }}"
            },
            {
              "fieldId": "protein",
              "fieldValue": "={{ $json.protein }}"
            },
            {
              "fieldId": "fat",
              "fieldValue": "={{ $json.fat }}"
            },
            {
              "fieldId": "analysis",
              "fieldValue": "={{ $json.analysis }} {{ $json.suggestion }}"
            },
            {
              "fieldId": "score",
              "fieldValue": "={{ $json.score }}"
            },
            {
              "fieldId": "corner",
              "fieldValue": "={{ $json.corner }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -336,
        528
      ],
      "id": "8ac75bfb-ebef-4ff1-bed4-6739a6cd0061",
      "name": "Supabase"
    },
    {
      "parameters": {
        "url": "=https://front.cjfreshmeal.co.kr/meal/v1/today-all-meal?storeIdx=6437&mealDt={{ $json.timestamp.toDateTime().format('yyyyMMdd') }}&reqType=total",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -2688,
        1344
      ],
      "id": "8a09198a-7660-4526-b6a1-ae04e6d5e530",
      "name": "êµ¬ë‚´ì‹ë‹¹ ì¡°íšŒ1"
    },
    {
      "parameters": {
        "path": "cafeteria"
      },
      "type": "@n8n/n8n-nodes-langchain.mcpTrigger",
      "typeVersion": 1,
      "position": [
        192,
        512
      ],
      "id": "3fe2ce7f-297d-4f06-a3e1-e8ee7c7bcf94",
      "name": "MCP Server Trigger",
      "webhookId": "470180c4-40ed-4fd8-8773-d8481eaa5a7c"
    },
    {
      "parameters": {
        "operation": "getAll",
        "tableId": "meal",
        "returnAll": true
      },
      "type": "n8n-nodes-base.supabaseTool",
      "typeVersion": 1,
      "position": [
        272,
        752
      ],
      "id": "925f082e-999b-41af-9166-79821768da50",
      "name": "Get cafeteria"
    },
    {
      "parameters": {
        "content": "# MCP Server\n\n1/ n8nì—ì„œ MCP Triggerì— URLì„ ë³µì‚¬. ê·¸ë¦¬ê³  ë°˜ë“œì‹œ ì›Œí¬í”Œë¡œìš°ë¥¼ Activeë¡œ ì„¤ì •\n2/ Claude PC Appìœ¼ë¡œ ì ‘ì† í›„ ì„¤ì • > ê°œë°œì ì—ì„œ MCP ì„¤ì •ì„ ì„ íƒ\n3/ claude_desktop_config.json ê°’ì„ ì•„ë˜ ê°’ìœ¼ë¡œ ë³€ê²½í•˜ê¸°.\n```\n{\n  \"mcpServers\": {\n    \"n8n\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"-y\",\n        \"supergateway\",\n        \"--sse\",\n        \"http://localhost:5678/mcp/MCP/sse\"\n      ]\n    }\n  }\n}\n```\n\n4/ Claude PC Appì„ ì¬ì‹¤í–‰í•˜ê³  ì •ìƒì ìœ¼ë¡œ ì—°ê²°ë˜ì—ˆëŠ”ì§€ ì²´í¬í•˜ê¸°.\n5/ ì˜¤ë¥˜ê°€ ë‚˜ë©´, í•´ë‹¹ ì˜¤ë¥˜ë¥¼ GPTì—ê²Œ ë¬¸ì˜. ê°„í˜¹ ë‘ì„¸ë²ˆ ê»ë‹¤í‚¤ë©´ ë‹¤ì‹œ ì—°ê²°ë¨",
        "height": 920,
        "width": 600,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        0,
        0
      ],
      "id": "852c7f2c-ada6-4ba3-8f66-a28209d28990",
      "name": "Sticky Note16"
    }
  ],
  "connections": {
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "ì˜ì–‘ë¶„ì„ Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "ì˜ì–‘ë¶„ì„ Agent": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Sort": {
      "main": [
        [
          {
            "node": "Filter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter": {
      "main": [
        [
          {
            "node": "Limit",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Resize Img",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI": {
      "main": [
        [
          {
            "node": "ì˜ì–‘ë¶„ì„ Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "í•„ìš”í•œ ì»¬ëŸ¼ë§Œ": {
      "main": [
        [
          {
            "node": "Sort",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Resize Img": {
      "main": [
        [
          {
            "node": "OpenAI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ],
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "Discord",
            "type": "main",
            "index": 0
          },
          {
            "node": "Convert to File",
            "type": "main",
            "index": 0
          },
          {
            "node": "Supabase",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "ì˜ì–‘ë¶„ì„ Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "êµ¬ë‚´ì‹ë‹¹ ì¡°íšŒ": {
      "main": [
        [
          {
            "node": "ì¤‘ì‹",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Run 1130": {
      "main": [
        [
          {
            "node": "êµ¬ë‚´ì‹ë‹¹ ì¡°íšŒ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Run 0530": {
      "main": [
        [
          {
            "node": "êµ¬ë‚´ì‹ë‹¹ ì¡°íšŒ1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "í•„ìš”í•œ ì»¬ëŸ¼ë§Œ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì¤‘ì‹": {
      "main": [
        [
          {
            "node": "ì¤‘ì‹ë¼ë²¨",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì„ì‹": {
      "main": [
        [
          {
            "node": "ì„ì‹ë¼ë²¨",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì¤‘ì‹ë¼ë²¨": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì„ì‹ë¼ë²¨": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "êµ¬ë‚´ì‹ë‹¹ ì¡°íšŒ1": {
      "main": [
        [
          {
            "node": "ì„ì‹",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get cafeteria": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "pinData": {
    "Run 0530": [
      {
        "json": {
          "timestamp": "2025-04-29T17:30:01.007+09:00",
          "Readable date": "April 29th 2025, 5:30:01 pm",
          "Readable time": "5:30:01 pm",
          "Day of week": "Tuesday",
          "Year": "2025",
          "Month": "April",
          "Day of month": "29",
          "Hour": "17",
          "Minute": "30",
          "Second": "01",
          "Timezone": "Asia/Seoul (UTC+09:00)"
        }
      }
    ]
  },
  "meta": null,
  "tags": [
    {
      "createdAt": "2025-08-30T08:59:38.310Z",
      "updatedAt": "2025-08-30T08:59:38.310Z",
      "id": "AcUSaCB8M2O4FWJw",
      "name": "inflearn"
    }
  ]
}